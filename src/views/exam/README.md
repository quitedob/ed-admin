# 考试管理系统

## 功能概述

完整的考试管理系统，采用步骤条设计，支持考试的创建、发布、监考、批改、统计分析全流程管理。

## 目录结构

```
exam/
├── README.md                          # 完整文档
├── list/                              # 考试列表
│   └── index.vue
├── create/                            # 考试创建/编辑（步骤条）
│   ├── index.vue
│   └── components/
│       ├── PaperBuilder.vue          # 试卷构建器 ⭐核心组件
│       └── QuestionSelector.vue      # 选题对话框
├── grades/                            # 成绩管理
│   └── index.vue
└── statistics/                        # 考试统计
    └── index.vue
```

## 核心特性

### 🎯 步骤条设计

采用 `el-steps` 组件实现五步创建流程：

1. **基本信息** - 考试标题、描述、类型、难度
2. **时间安排** - 开始/结束时间、时长、复习时间
3. **组建试卷** - 题库分类、选题、分值设置 ⭐核心
4. **阅卷设置** - 自动/AI/人工评分配置
5. **考试设置** - 成绩显示、随机、监考等

### 🎨 试卷构建器

**左右双面板设计**

*左侧：题库分类配置 (320px)*
- 题库类型卡片
- 题数和总分统计
- 从题库选题按钮
- 拖拽排序支持

*右侧：试卷预览*
- 按题库分类展示
- 实时显示总分
- 及格线设置
- 单题分值调整
- 必做/选做设置

## 页面功能详解

### 1. 考试列表页面 (`list/index.vue`)

#### 布局设计
- 卡片网格布局（3列）
- 每个卡片展示一个考试

#### 核心功能
✅ 考试卡片展示
  - 考试标题、描述
  - 类型和状态标签
  - 时间、时长、题数、总分
  - 参考人数、提交数、平均分

✅ 筛选和搜索
  - 关键词搜索
  - 按类型筛选（测验/期中/期末/编程）
  - 按状态筛选（未开始/进行中/已结束/草稿）

✅ 快速操作
  - 编辑考试
  - 查看详情
  - 批改试卷
  - 统计分析
  - 删除考试

#### 考试状态
- `pending`: 未开始
- `ongoing`: 进行中
- `ended`: 已结束
- `draft`: 草稿

---

### 2. 考试创建/编辑页面 (`create/index.vue`)

#### 步骤一：基本信息

**表单字段**
- 考试标题（必填，50字限制）
- 考试描述（200字限制）
- 考试类型（必填）
  - 测验 (quiz)
  - 期中考试 (midterm)
  - 期末考试 (final)
  - 编程考试 (programming)
  - 其他 (other)
- 难度等级（简单/中等/困难）
- 关联班级（必填）

**验证规则**
- 标题、类型、班级为必填项
- 通过验证后才能进入下一步

---

#### 步骤二：时间安排

**表单字段**
- 考试开始时间（必填）
- 考试结束时间（必填）
- 考试时长（必填，10-300分钟）
- 复习开始时间（可选）

**说明**
- 复习时间：学生可以在此时间后查看试卷和答案
- 时长设置：用于限制学生答题时间

---

#### 步骤三：组建试卷 ⭐核心功能

**试卷构建器 (`PaperBuilder.vue`)**

*功能特性*

1. **题库分类管理**
   - 添加题库（选择题型、命名、设置单题分值）
   - 删除题库
   - 拖拽排序（待实现）

2. **从题库选题**
   - 点击"从题库选题"打开选题对话框
   - 按题型自动筛选
   - 支持多维度筛选（题库、标签、难度）
   - 批量选择题目

3. **试卷预览**
   - 按题库分类展示
   - 显示题号、题目内容
   - 单题分值调整
   - 必做/选做设置
   - 删除题目

4. **分数管理**
   - 自动计算总分
   - 手动设置及格线
   - 实时更新统计

**数据结构**

```javascript
questionBanks: [
  {
    id: 'bank_001',
    type: 'single',        // 题型
    name: '单选题库',
    selectedCount: 10,     // 选题数量
    scorePerQuestion: 2,   // 单题分值
    totalScore: 20,        // 总分
    questions: [           // 题目列表
      {
        id: 'q_001',
        questionText: '...',
        score: 2,          // 本题分值（可调整）
        required: true     // 是否必做
      }
    ]
  }
]
```

---

#### 步骤四：阅卷设置

**自动评分**
- 开关控制
- 选择题和填空题自动评分

**AI批改配置**
- 开关控制
- AI模型选择（GPT-4/GPT-3.5/Claude）
- AI评分规则（自定义）
- 启用AI的题型（问答题/编程题）

**人工评分配置**
- 是否需要人工复审
- 指定评卷老师（多选）
- 批改截止时间

---

#### 步骤五：考试设置

**成绩显示**
- 考完立即显示
- 指定时间显示（需选择时间）
- 手动发布

**题目设置**
- 随机出题：从题库中随机抽取
- 随机顺序：打乱题目和选项顺序

**防作弊设置**
- 禁用复制粘贴
- 全屏模式要求
- 允许切屏（可设置次数限制）

**监考设置**
- 不需要监考
- 摄像头监考
- 屏幕录制
- 摄像头+屏幕
- 监考频率（5/10/15分钟或持续）

---

### 3. 选题对话框 (`QuestionSelector.vue`)

#### 功能特性

**筛选功能**
- 按题库筛选
- 按标签筛选（多选）
- 按难度筛选
- 关键词搜索

**选题操作**
- 单选/多选题目
- 批量选择本页
- 取消全选
- 实时显示已选数量

**题目展示**
- 题号、题目内容
- 难度标签
- 标签列表
- 分页显示

---

## 数据结构

### 考试 (Exam)

```javascript
{
  id: 'exam_001',
  classId: 'class_001',
  courseId: 'course_001',
  title: '期中考试',
  description: 'JavaScript基础期中测试',
  type: 'midterm', // quiz, midterm, final, programming, other
  difficulty: 'medium', // easy, medium, hard
  
  // 时间配置
  schedule: {
    startTime: '2024-12-15T10:00:00Z',
    endTime: '2024-12-15T11:30:00Z',
    duration: 90, // 分钟
    reviewStartTime: '2024-12-20T10:00:00Z' // 可选
  },
  
  // 试卷配置
  questionBanks: [
    {
      id: 'eb_001',
      type: 'single',
      name: '单选题库',
      selectedCount: 10,
      scorePerQuestion: 2,
      totalScore: 20,
      questions: [
        {
          id: 'q_001',
          questionId: 'q_001', // 引用题库中的题目
          questionText: '...',
          score: 2,
          required: true
        }
      ]
    }
  ],
  
  totalScore: 100,
  passingScore: 60,
  
  // 阅卷设置
  grading: {
    autoGrade: true,
    aiGrade: true,
    aiModel: 'gpt-4',
    aiScoringRule: '...',
    aiEnabledTypes: ['essay', 'programming'],
    manualReview: true,
    reviewers: ['teacher_001', 'teacher_002'],
    gradingDeadline: '2024-12-20T23:59:59Z'
  },
  
  // 考试设置
  settings: {
    // 成绩显示
    showScoreMode: 'immediate', // immediate, scheduled, manual
    showScoreTime: null,
    
    // 题目设置
    randomQuestions: false, // 随机抽题
    randomOrder: true, // 随机顺序
    
    // 防作弊
    disableCopyPaste: true,
    fullscreenRequired: false,
    allowTabSwitch: false,
    maxTabSwitches: 3,
    
    // 监考
    proctorMode: 'none', // none, camera, screen, both
    proctorFrequency: '10' // 5, 10, 15, continuous
  },
  
  // 统计数据
  participantCount: 30,
  submittedCount: 25,
  averageScore: 75,
  
  status: 'published', // draft, published, pending, ongoing, ended
  createdAt: '2024-12-01T10:00:00Z',
  createdBy: 'teacher_001'
}
```

### 考试提交 (ExamSubmission)

```javascript
{
  id: 'exsub_001',
  studentId: 'stu_001',
  studentName: '张三',
  examId: 'exam_001',
  startTime: '2024-12-15T10:00:00Z',
  submitTime: '2024-12-15T11:25:00Z',
  score: 75,
  maxScore: 100,
  status: 'submitted', // started, submitted, grading, graded
  
  // 监考记录
  proctorLogs: [
    {
      timestamp: '2024-12-15T10:15:00Z',
      type: 'camera', // camera, screen, tab_switch
      snapshot: 'base64_image_data',
      warning: false
    }
  ],
  
  // 答案记录（格式同作业）
  answers: [
    {
      questionId: 'q_001',
      type: 'single',
      studentAnswer: 'C',
      correctAnswer: 'C',
      score: 2,
      maxScore: 2,
      isCorrect: true,
      status: 'auto_graded'
    }
  ]
}
```

## 业务流程

### 考试创建流程

1. **填写基本信息**
   - 输入标题、描述
   - 选择类型、难度、班级
   - 点击"下一步"

2. **设置时间安排**
   - 选择开始/结束时间
   - 设置考试时长
   - 可选设置复习时间
   - 点击"下一步"

3. **组建试卷** ⭐核心步骤
   - 点击"添加题库"
   - 选择题型、命名、设置分值
   - 点击"从题库选题"
   - 筛选并选择题目
   - 调整单题分值
   - 设置必做/选做
   - 设置及格线
   - 点击"下一步"

4. **配置阅卷设置**
   - 启用自动评分
   - 配置AI批改
   - 设置人工复审
   - 点击"下一步"

5. **配置考试设置**
   - 设置成绩显示方式
   - 配置随机选项
   - 设置防作弊措施
   - 配置监考设置
   - 点击"完成"

6. **发布考试**
   - 确认所有设置
   - 点击"发布考试"
   - 考试发布成功

### 考试进行流程

1. **学生进入考试**
   - 检查时间是否在考试时段
   - 检查是否需要全屏
   - 启动监考（如需要）

2. **答题过程**
   - 显示题目（随机顺序）
   - 记录答题时间
   - 监控切屏行为
   - 定时保存答案

3. **提交试卷**
   - 检查必做题是否完成
   - 确认提交
   - 自动评分（选择题/填空题）
   - AI批改（问答题/编程题）

4. **成绩显示**
   - 根据设置显示成绩
   - 立即显示/定时显示/手动发布

### 批改流程

1. **查看提交列表**
   - 按学生或按题目视图
   - 筛选待批改

2. **批改答题**
   - 查看学生答案
   - 确认AI评分
   - 输入人工评分
   - 添加批改意见

3. **发布成绩**
   - 完成所有批改
   - 确认成绩
   - 发布给学生

## 技术特性

### 核心技术栈
- Vue 3 Composition API
- Element Plus UI组件库
- el-steps 步骤条
- SCSS样式预处理器

### 设计模式
- 步骤条导航
- 组件化设计
- 双面板布局
- 响应式数据绑定

### 用户体验
- 分步引导
- 实时预览
- 智能验证
- 进度保存
- 快捷操作

## 与作业管理的区别

| 特性 | 作业管理 | 考试管理 |
|------|---------|---------|
| 创建方式 | 折叠面板 | 步骤条 |
| 时间限制 | 截止时间 | 开始+结束+时长 |
| 题目组织 | 单一列表 | 题库分类 |
| 监考功能 | 无 | 摄像头/屏幕录制 |
| 防作弊 | 基础 | 全面（全屏/切屏限制） |
| 成绩显示 | 立即 | 可配置（立即/定时/手动） |
| 随机功能 | 无 | 随机抽题/随机顺序 |

## 待开发功能

### 高优先级
🔲 考试详情页面
🔲 考试批改页面（复用作业批改）
🔲 考试统计分析页面
🔲 学生端考试界面
🔲 监考功能实现

### 中优先级
🔲 试卷模板管理
🔲 题库拖拽排序
🔲 考试预览功能
🔲 成绩导出
🔲 违规记录查看

### 低优先级
🔲 考试归档
🔲 历史数据对比
🔲 智能组卷
🔲 难度平衡分析
🔲 移动端适配

## 使用说明

### 教师端

**创建考试**
1. 进入考试管理页面
2. 点击"新建考试"
3. 按步骤填写信息
4. 组建试卷（核心步骤）
5. 配置阅卷和考试设置
6. 发布考试

**组建试卷**
1. 点击"添加题库"
2. 选择题型并命名
3. 点击"从题库选题"
4. 筛选并选择题目
5. 调整分值和设置
6. 重复添加其他题库
7. 设置及格线

**批改考试**
1. 选择考试点击"批改"
2. 查看学生提交
3. 确认AI评分
4. 输入人工评分
5. 发布成绩

**查看统计**
1. 选择考试点击"统计"
2. 查看总体数据
3. 分析题目质量
4. 导出报告

### 学生端（待开发）
1. 查看考试列表
2. 进入考试（检查时间）
3. 开始答题
4. 提交试卷
5. 查看成绩和解析

## 最佳实践

### 考试设计
- 题目数量适中（30-50题）
- 难度梯度合理
- 时间充足（1.5-2倍预估时间）
- 设置合理的及格线

### 试卷组建
- 按题型分类组织
- 单题分值合理
- 必做题为主，选做题为辅
- 总分控制在100-150分

### 防作弊
- 启用随机顺序
- 设置全屏模式
- 限制切屏次数
- 启用监考功能

### 批改建议
- 及时批改，不超过2天
- 复核AI评分
- 提供详细反馈
- 关注异常提交

## 性能优化

- 懒加载（步骤内容）
- 虚拟滚动（大量题目）
- 防抖节流（搜索输入）
- 缓存策略（题库数据）

## 安全考虑

- 权限控制（教师/学生）
- 时间验证（防止提前/延后）
- 数据加密（答案数据）
- 防作弊机制（监考/切屏检测）
- 备份机制（自动保存）

---

## 总结

考试管理系统采用步骤条设计，提供了清晰的创建流程。核心的试卷构建器采用双面板布局，支持灵活的题库分类和题目管理。通过完善的阅卷设置和考试设置，实现了从创建到批改到统计的全流程管理，并提供了强大的防作弊和监考功能。
