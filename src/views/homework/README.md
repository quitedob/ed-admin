# 作业管理系统

## 功能概述

完整的作业管理系统，支持作业的创建、发布、批改、统计分析全流程管理。

## 目录结构

```
homework/
├── list/                          # 作业列表
│   └── index.vue
├── create/                        # 作业创建/编辑
│   ├── index.vue
│   └── components/
│       └── QuestionBankSelector.vue  # 题库选择器
├── review/                        # 作业批改
│   ├── index.vue
│   └── components/
│       └── QuestionGradingDialog.vue # 单题批改对话框
└── statistics/                    # 作业统计分析
    ├── index.vue
    └── components/
        └── QuestionDetailDialog.vue  # 题目详细分析
```

## 页面功能详解

### 1. 作业列表页面 (`list/index.vue`)

#### 布局设计
- **左侧栏 (240px)**：作业列表
- **右侧内容区**：作业概览详情

#### 核心功能
✅ 作业列表展示
  - 作业名称、班级、提交情况
  - 截止时间、状态图标
  - 选中高亮效果

✅ 筛选和搜索
  - 按班级筛选
  - 按状态筛选（已发布/草稿/已结束）
  - 关键词搜索

✅ 作业概览卡片
  - 基本信息（班级、截止时间、总分、题目数量）
  - 提交统计（已提交/待批改/未提交）
  - 进度条可视化

✅ 快速操作
  - 编辑作业
  - 批改作业
  - 分析统计
  - 复制作业
  - 发布到班级
  - 删除作业

#### 状态管理
- `published`: 已发布
- `draft`: 草稿
- `ended`: 已结束

---

### 2. 作业创建/编辑页面 (`create/index.vue`)

#### 页面结构
垂直单栏布局，折叠面板设计

#### 功能模块

**基本信息**
- 作业标题、描述
- 关联班级
- 作业类型（练习/考查/综合）
- 难度等级（简单/中等/困难）

**时间安排**
- 发布时间
- 截止时间
- 提醒时间
- 允许晚交开关

**题目管理（双面板）**

*左侧面板 (280px)*
- 已添加题目列表
- 显示题号、题型、分值
- 支持拖拽排序（vuedraggable）
- 删除题目
- 实时显示总分

*右侧面板*
- 题目内容展示（只读）
- 作业特定设置：
  - 修改本题分值
  - 是否必做
  - 补充解析（作业专属）

**阅卷设置**
- ✅ 自动评分（选择题/填空题）
- ✅ AI辅助批改（问答题）
  - AI模型选择（GPT-4/GPT-3.5/Claude）
  - 自定义评分标准
- ✅ 人工复审
- ✅ 其他设置
  - 显示正确答案
  - 立即评分

#### 题库选择器 (`QuestionBankSelector.vue`)

**功能特性**
- 多维度筛选
  - 按题库筛选
  - 按题型筛选
  - 按标签筛选
- 关键词搜索
- 批量选择
- 实时统计（已选题目数、总分）
- 分页显示

**操作流程**
1. 点击"从题库选择"按钮
2. 设置筛选条件
3. 勾选需要的题目
4. 确认添加到作业

---

### 3. 作业批改页面 (`review/index.vue`)

#### 双视图模式

**按学生视图**
- 左侧：学生列表
  - 状态图标（✓已批改 ⏰待批改 ✗未提交）
  - 分数和进度条
  - 搜索和状态筛选
- 右侧：学生答题详情
  - 学生信息卡片
  - 题目列表（显示每题得分和状态）
  - 点击题目进入批改

**按题目视图**
- 左侧：题目列表
  - 题型标签
  - 答对率统计
  - 答题人数
- 右侧：题目答题情况
  - 题目信息卡片
  - 学生答题列表
  - 点击学生进入批改

#### 单题批改对话框 (`QuestionGradingDialog.vue`)

**三区域布局**

*题目内容区（只读，灰色背景）*
- 题目描述
- 选项展示（标注正确答案）
- 参考答案

*学生答案区（白色背景）*
- 学生选择/填写的答案
- 高亮显示学生选择
- 自动评分结果（选择题/填空题）

*批改操作区（绿色边框）*
- **AI批改结果**（问答题）
  - AI评分和评语
  - AI准确性确认（✓准确 ✗有误）
  - 启用/禁用开关
- **人工批改**
  - 确认分数（可锁定/解锁）
  - 使用AI评分按钮
  - 批改意见输入
  - 评分标签（优秀/良好/需改进等）

**导航功能**
- 上一题/下一题按钮
- 题目进度指示器（1/10）
- 保存评分
- 保存并下一题

**支持题型**
- ✅ 单选题：显示所有选项，标注学生选择和正确答案
- ✅ 多选题：复选框显示，标注正确/错误选项
- ✅ 填空题：显示每个填空的答案和正确性
- ✅ 问答题：完整答案展示 + AI辅助批改
- 🔲 编程题：待集成HOJ系统

---

### 4. 作业统计分析页面 (`statistics/index.vue`)

#### 总体统计卡片

四个核心指标卡片：
- 总人数
- 已提交（提交率）
- 平均分
- 及格率

#### 图表分析

**分数分布图**
- 柱状图展示
- 分段统计：
  - 优秀 (90-100)
  - 良好 (80-89)
  - 中等 (70-79)
  - 及格 (60-69)
  - 不及格 (<60)

**提交时间分布**
- 折线图展示
- 分析学生提交时间规律

#### 题目分析表格

**显示字段**
- 题号、题型、题目内容
- 分值、正确率（进度条）
- 平均分
- 难度系数
- 区分度

**排序方式**
- 按顺序
- 按难度
- 按正确率

**题目质量指标**
- **难度系数**：正确率（0-1）
  - ≥0.8：简单
  - 0.5-0.8：中等
  - <0.5：困难
- **区分度**：高分组和低分组的差异（0-1）
  - ≥0.4：优秀
  - 0.3-0.4：良好
  - 0.2-0.3：一般
  - <0.2：较差

#### 学生成绩排名

**显示内容**
- 排名（前三名奖牌标识）
- 姓名、学号
- 得分、得分率（进度条）
- 提交时间、用时
- 状态

**功能**
- 学生搜索
- 点击查看详情

#### 高频错题分析

**展示内容**
- 错误率排名
- 题目内容
- 错误人数
- 常见错误类型

**用途**
- 识别教学薄弱点
- 制定针对性教学计划

#### 题目详细分析对话框 (`QuestionDetailDialog.vue`)

**统计指标**
- 正确率、平均分
- 难度系数、区分度

**答案分布**（选择题）
- 各选项选择人数和百分比
- 进度条可视化

**常见错误分析**
- 列出典型错误
- 错误原因分析

**学生答题详情**
- 每个学生的答案
- 正确/错误标识
- 得分情况
- 答题时间

**教学建议**
- 根据正确率自动生成
- 根据区分度自动生成
- 提供改进建议

---

## 数据结构

### 作业 (Homework)

```javascript
{
  id: 'hw_001',
  classId: 'class_001',
  className: '前端开发一班',
  courseId: 'course_001',
  title: '第一章作业',
  description: '完成第一章基础知识的练习',
  type: 'exercise', // exercise, exam, practice
  difficulty: 'easy', // easy, medium, hard
  
  // 时间配置
  schedule: {
    releaseTime: '2024-12-15T10:00:00Z',
    dueTime: '2024-12-25T23:59:59Z',
    remindTime: '2024-12-24T12:00:00Z'
  },
  
  // 题目列表
  questions: [
    {
      id: 'hwq_001',
      questionId: 'q_001', // 引用题库中的题目
      type: 'single',
      questionText: '软件工程的核心目标是什么?',
      score: 2, // 作业中该题的分值
      required: true, // 是否必做
      order: 1,
      homeworkExplanation: '补充解析...' // 作业特定解析
    }
  ],
  
  totalScore: 50,
  
  // 评分设置
  settings: {
    autoGrade: true, // 自动评分
    aiGrade: true, // 启用AI评分
    aiModel: 'gpt-4', // AI模型
    aiScoringRule: '根据答题内容评分...', // AI评分规则
    manualReview: true, // 人工复审
    allowLateSubmission: true, // 允许晚交
    showCorrectAnswers: true, // 显示答案
    immediateGrading: true // 立即评分
  },
  
  // 统计数据
  totalStudents: 30,
  submitCount: 15,
  submitRate: 50,
  gradedCount: 10,
  pendingCount: 5,
  notSubmitCount: 15,
  
  status: 'published', // published, draft, ended
  createdAt: '2024-12-01T10:00:00Z',
  createdBy: 'teacher_001'
}
```

### 学生提交 (Submission)

```javascript
{
  id: 'sub_001',
  studentId: 'stu_001',
  studentName: '张三',
  homeworkId: 'hw_001',
  submitTime: '2024-12-20T15:30:00Z',
  score: 40,
  maxScore: 50,
  status: 'submitted', // submitted, grading, graded
  
  // 答案记录
  answers: [
    {
      questionId: 'hwq_001',
      type: 'single',
      studentAnswer: 'C',
      correctAnswer: 'C',
      score: 2,
      maxScore: 2,
      isCorrect: true,
      
      // AI评分（问答题）
      aiScore: 2,
      aiComment: '正确',
      
      // 人工评分
      manualScore: 2,
      manualComment: '',
      
      status: 'auto_graded' // auto_graded, manual_reviewed, pending
    },
    {
      questionId: 'hwq_004',
      type: 'essay',
      studentAnswer: '软件工程是...',
      correctAnswer: null,
      score: 3,
      maxScore: 5,
      isCorrect: false,
      aiScore: 3,
      aiComment: '表述基本正确，但缺少关键概念',
      manualScore: 3,
      manualComment: '同意AI评分',
      status: 'manual_reviewed'
    }
  ]
}
```

### 题目统计 (QuestionStats)

```javascript
{
  id: 'hwq_001',
  questionNumber: 1,
  type: 'single',
  questionText: '软件工程的核心目标是什么?',
  score: 2,
  
  // 统计指标
  correctRate: 85, // 正确率 (%)
  averageScore: 1.7, // 平均分
  difficultyIndex: 0.85, // 难度系数 (0-1)
  discrimination: 0.45, // 区分度 (0-1)
  
  // 错误分析
  errorRate: 15,
  errorCount: 4,
  commonErrors: ['选择A', '选择B']
}
```

## 技术特性

### 核心技术栈
- Vue 3 Composition API
- Element Plus UI组件库
- vuedraggable（拖拽排序）
- SCSS样式预处理器

### 设计模式
- 组件化设计
- 响应式布局
- 状态管理
- 事件驱动

### 用户体验
- 双面板布局
- 拖拽排序
- 实时统计
- 进度可视化
- 快捷操作
- 智能提示

## 业务流程

### 作业创建流程
1. 填写基本信息（标题、班级、类型、难度）
2. 设置时间安排（发布、截止、提醒）
3. 从题库选择题目
4. 调整题目顺序和分值
5. 配置阅卷设置
6. 保存草稿或直接发布

### 作业批改流程
1. 选择作业进入批改页面
2. 选择视图模式（按学生/按题目）
3. 选择学生或题目
4. 查看学生答案
5. 确认AI评分（如有）
6. 输入人工评分和意见
7. 保存并继续下一题
8. 完成所有批改

### 统计分析流程
1. 查看总体统计指标
2. 分析分数分布
3. 查看题目质量分析
4. 识别高频错题
5. 查看学生排名
6. 导出分析报告
7. 制定教学改进计划

## AI批改功能

### 支持题型
- ✅ 问答题（主要应用场景）
- 🔲 编程题（待集成）

### AI评分流程
1. 学生提交答案
2. 系统调用AI模型
3. AI根据评分标准打分
4. 生成评语和建议
5. 教师确认或修改
6. 保存最终成绩

### AI模型选择
- GPT-4：准确度高，成本较高
- GPT-3.5：平衡性能和成本
- Claude：替代方案

### 评分标准配置
- 自定义评分规则
- 关键词匹配
- 语义相似度
- 逻辑完整性
- 表达清晰度

## 待开发功能

### 高优先级
🔲 图表可视化（ECharts集成）
🔲 导出功能（PDF/Excel）
🔲 批量批改
🔲 作业模板管理
🔲 评语模板库

### 中优先级
🔲 学生端作业提交界面
🔲 作业提醒通知
🔲 晚交惩罚机制
🔲 作业讨论区
🔲 同伴互评

### 低优先级
🔲 作业归档
🔲 历史数据对比
🔲 学习曲线分析
🔲 个性化推荐
🔲 移动端适配

## 使用说明

### 教师端

**创建作业**
1. 进入作业管理页面
2. 点击"新建作业"
3. 填写作业信息
4. 从题库选择题目
5. 配置评分设置
6. 发布作业

**批改作业**
1. 选择作业点击"批改"
2. 选择视图模式
3. 逐题批改或批量批改
4. 确认AI评分
5. 输入批改意见
6. 保存评分

**查看统计**
1. 选择作业点击"分析"
2. 查看总体统计
3. 分析题目质量
4. 识别薄弱环节
5. 导出分析报告

### 学生端（待开发）
1. 查看作业列表
2. 点击作业开始答题
3. 提交答案
4. 查看批改结果
5. 查看错题解析

## 最佳实践

### 作业设计
- 题目数量适中（10-20题）
- 难度梯度合理
- 覆盖知识点全面
- 设置合理的截止时间

### 批改建议
- 及时批改，不超过3天
- 提供详细的批改意见
- 对AI评分进行复核
- 关注学生的进步

### 统计分析
- 定期查看统计数据
- 关注低正确率题目
- 分析学生薄弱环节
- 调整教学策略

## 性能优化

- 虚拟滚动（大量数据）
- 懒加载（图表组件）
- 防抖节流（搜索输入）
- 缓存策略（统计数据）

## 安全考虑

- 权限控制（教师/学生）
- 数据加密（敏感信息）
- 防作弊机制（时间限制、IP检测）
- 备份机制（数据安全）

---

## 总结

作业管理系统提供了完整的作业全生命周期管理功能，从创建、发布、批改到统计分析，形成闭环。通过AI辅助批改和详细的统计分析，大大提高了教师的工作效率，同时为教学改进提供了数据支持。
